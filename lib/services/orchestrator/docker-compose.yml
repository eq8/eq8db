version: '2'
services:
  elasticsearch:
    image: elasticsearch:5.3.2-alpine
    restart: always
  mysqlmgr:
    image: mysql/mysql-cluster:7.5
    restart: always
    command: "ndb_mgmd"
  mysql:
    depends_on:
     - mysqlmgr
    image: mysql/mysql-cluster:7.5
    restart: always
    command: "ndbd"
  rabbitmq:
    image: rabbitmq:3.6.9-alpine
    restart: always
  redis:
    image: redis:3.2.8-alpine
    restart: always
  manager:
    image: equate/db:latest
    restart: always
    command: eq8db manage
  worker:
    image: equate/db:latest
    restart: always
    command: eq8db run
    ports:
     - "${HTTP_PORT}:8000"
