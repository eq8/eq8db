#!/usr/bin/env node

'use strict';

const _ = require('lodash');
const program = require('commander');

const pkg = require('../package.json');

/**
 * Program Options
 */
program
	.description('Runs an instance of the eq8store manager')
  .version(pkg.version)
	.option('--log-level <string>', 'Set the log level for the instance', /^(info|debug|trace)$/i)
	.option('--join <uri>', 'Join an existing eq8store stack')
  .parse(process.argv);

const logLevel = _.pick(program, ['logLevel']);
const options = _.pick(program, ['join']);
const eq8store = require('..')(logLevel);

eq8store.run(options);
