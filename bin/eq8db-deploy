#!/usr/bin/env node

'use strict';

const _ = require('lodash');
const program = require('commander');

const pkg = require('../package.json');

/**
 * Program Options
 */
program
	.description('Deploys an eq8db stack in Docker')
	.version(pkg.version)
	.option('--stack <string>', 'The eq8db stack name to deploy in Docker')
	.option('--docker <uri>', 'Docker host to connect to')
	.option('--port <num>', 'The port to bind on', parseInt)
	.option('--dev', 'Enable development mode - i.e. also deploy backing services')
	.parse(process.argv);

const options = _.pick(program, ['stack', 'docker', 'port', 'dev']);
const eq8db = require('..');

eq8db.deploy(options);
